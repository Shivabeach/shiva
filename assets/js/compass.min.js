"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Calc=function Calc(budget){_classCallCheck(this,Calc),this.budget=budget},Cost=function Cost(expense,reason,day){_classCallCheck(this,Cost),this.expense=expense,this.reason=reason,this.day=day},UI=function(){function UI(){_classCallCheck(this,UI)}return _createClass(UI,null,[{key:"displayCosts",value:function(){Store.getCosts().forEach(function(cost){return UI.addExpenseToList(cost)})}},{key:"addExpenseToList",value:function(cost){var list=document.querySelector(".disp"),row=document.createElement("tr");row.innerHTML="\n      <td>$"+cost.expense+"</td>\n      <td>"+cost.reason+"</td>\n      <td>"+cost.day+'</td>\n      <td><a href="#" class="btn btn-danger btn-sm delete">X</a></td>',list.appendChild(row)}},{key:"deleteBook",value:function(el){el.classList.contains("delete")&&el.parentElement.parentElement.remove()}},{key:"clearFields",value:function(){document.querySelector("#expense").value="",document.querySelector("#reason").value="",document.querySelector("#day").value=""}},{key:"displayBudget",value:function(){var calc=Store.getBudget();document.getElementById("finalDisplay").innerHTML="$"+calc}}]),UI}(),Store=function(){function Store(){_classCallCheck(this,Store)}return _createClass(Store,null,[{key:"getCosts",value:function(){return null===localStorage.getItem("costs")?[]:JSON.parse(localStorage.getItem("costs"))}},{key:"addCosts",value:function(cost){var costs=Store.getCosts();costs.push(cost),localStorage.setItem("costs",JSON.stringify(costs))}},{key:"removeBook",value:function(day){var costs=Store.getCosts();costs.forEach(function(cost,index){cost.day===day&&costs.splice(index,1)}),localStorage.setItem("costs",JSON.stringify(costs))}},{key:"getBudget",value:function(){return""===localStorage.getItem("calced")?[]:JSON.parse(localStorage.getItem("calced"))}}]),Store}();document.addEventListener("DOMContentLoaded",UI.displayBudget()),document.addEventListener("DOMContentLoaded",UI.displayCosts()),document.querySelector("#expenseForm").addEventListener("submit",function(e){e.preventDefault();var expense=document.querySelector("#expense").value,reason=document.querySelector("#reason").value,day=document.querySelector("#day").value;if(""===expense)alert("Expense is not filled");else{var cost=new Cost(expense,reason,day);UI.addExpenseToList(cost),Store.addCosts(cost),UI.clearFields()}}),document.querySelector(".disp").addEventListener("click",function(e){UI.deleteBook(e.target),Store.removeBook(e.target.parentElement.previousElementSibling.textContent)}),document.getElementById("submit").addEventListener("click",function(e){e.preventDefault();var bud=document.getElementById("budget").value,budget=parseFloat(bud);document.querySelector(".displayBudget").innerHTML="$"+budget,localStorage.setItem("calced",budget)});